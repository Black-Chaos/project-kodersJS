import{B as f}from"./funds-8dc2fc24.js";const u=new f,s=document.querySelector(".category-wrapper");k();function k(){try{u.getTopBooks().then(e=>{s.innerHTML="",b(),h(e)})}catch(e){console.log(e)}}function b(){s.insertAdjacentHTML("beforeend",'<h1 class = "main-title">Best Sellers <span class = "main-title-span">Books</span></h1>')}function h(e){e.map(({list_name:t,books:o})=>{const n=C(o);v(t,n)}).join("")}function C(e){return e.length>0?e.map(({book_image:t,title:o,author:n,_id:r})=>g(t,o,n,r)).join(""):y()}function y(){return`<li class = "cork">
            <div class="cork-wraper-svg">
            <svg class="cork-svg">
              <use class="cork-use" href="./img/icons.svg#icon-cork-book"></use>
            </svg>
            <p class = "cork-text">Sorry, the book will be added later...</p>
            </div>
        </li>`}function v(e,t){const o=`<div class = "wrapper-for-genre">
                          <h2 class = "list-name">${e}</h2>
                          <ul class="category-list">${t}</ul>
                          <button class="button" type="button">See More</button>
                        </div>`;s.insertAdjacentHTML("beforeend",o),document.querySelector(".category-list").addEventListener("click",L);const r=document.querySelector(".button");t.includes('<li class = "cork">')&&r.classList.add("is-hidden")}s.addEventListener("click",B);function B(e){if(e.target.nodeName==="BUTTON"){const t=e.target.parentNode.firstElementChild.textContent,o=e.target.previousElementSibling,n=o.children;if(e.target.textContent==="See More")o.innerHTML="",T(t,o),e.target.textContent="See Less";else for(let r=0;r<n.length;r++)r>4&&(n[r].classList="items-is-hidden",e.target.textContent="See More")}}function T(e,t){try{u.getBookByCategory(e).then(o=>{S(o,t)})}catch(o){console.log(o)}}function S(e,t){e.map(({book_image:o,title:n,author:r,_id:i})=>{const l=g(o,n,r,i);t.insertAdjacentHTML("beforeend",l)}).join("")}function M(e){try{u.getBookByCategory(e).then(t=>{s.innerHTML="",E(e),w(t)})}catch(t){console.log(t)}}function E(e){const t=e.split(" "),o=t.splice(length-1);s.insertAdjacentHTML("beforeend",`<h1 class="main-title">${t.join(" ")} <span class = "main-title-span">${o}</span></h1>`)}function w(e){if(e.length>0){let t="";e.map(({book_image:o,title:n,author:r,_id:i})=>{const l=g(o,n,r,i);t+=l}),m(t)}else{const t=y();m(t)}}function g(e,t,o,n){const r=`<li class = "wrapper">
              <a href="#" class="link" id="${n}">
                <img class="img" src="${e}">
                <h3 class = "book-title">${t}</h3>
                <p class = "book-author">${o}</p>
              </a>
          </li>`;return document.querySelector(".link"),r}function m(e){const t=`<ul class="category-list">${e}</ul>`;s.insertAdjacentHTML("beforeend",t),document.querySelector(".category-list").addEventListener("click",L)}function L(e){e.preventDefault(),e.target.parentNode.nodeName==="A"&&e.target.parentNode.id}const d=document.getElementById("btn-to-top");d.addEventListener("click",A);window.onscroll=function(){j()};function j(){document.body.scrollTop>300||document.documentElement.scrollTop>300?d.style.display="block":d.style.display="none"}function A(){document.body.scrollTop=0,document.documentElement.scrollTop=0}const p=document.querySelector(".categories-elements"),$=new f;q();function q(){$.getCategoryList().then(e=>{const t=e.map(({list_name:o})=>`<li class="categories-list"><a class="category-link" href="#">${o}</a></li>`).sort().join("");p.insertAdjacentHTML("beforeend",t)}).catch(e=>console.log(e))}p.addEventListener("click",H);function H(e){if(e.preventDefault(),e.target.nodeName==="A"&&!e.target.classList.contains("active")){if(p.querySelector(".active").classList.remove("active"),e.target.classList.add("active"),e.target.textContent==="All categories"){k();return}M(e.target.textContent)}}const c={startBackdrop:document.querySelector(".start-backdrop"),startCloseBtn:document.querySelector(".start-close-btn"),form:document.querySelector(".start-form")},F="form-data";let a={};c.startCloseBtn.addEventListener("click",N);c.form.addEventListener("submit",x);window.addEventListener("keydown",D);function N(){c.startBackdrop.classList.add("is-hidden"),document.body.classList.remove("scroll-lock")}function x(e){e.preventDefault();const{name:t,email:o,password:n}=e.currentTarget.elements;a.name=t.value,a.email=o.value,a.password=n.value,localStorage.setItem(F,JSON.stringify(a)),e.currentTarget.reset(),c.startBackdrop.classList.add("is-hidden")}function D(e){e.code==="Escape"&&(c.startBackdrop.classList.add("is-hidden"),document.body.classList.remove("scroll-lock"),window.removeEventListener())}
